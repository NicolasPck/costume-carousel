<%= render "shared/navbar" %>

<div class="dashboard-container" >
  <h1>Dashboard</h1>

  <div class="card">
    <h2>My Bookings</h2>
      <% if @user.bookings.empty? %>
      <p> You don't have any bookings. :(  <%= link_to "Have a look at our costumes!", costumes_path %> </p>
      <% end %>
    <ul>
      <% @user.bookings.each do |booking| %>
        <div class="card">
          <li>
            <div class="grid-item">
              <strong>Name:</strong>  <%= link_to booking.costume.name, costume_path(booking.costume)%> |
              <strong>Start date:</strong>  <%= booking.start_date %> |
              <strong>End date:</strong>  <%= booking.end_date %> |
              <strong>Status:</strong>  <%= booking.status %>
            </div>
            <div class="item"></div>
            <div class="grid-item">
              <button type="button" class="btn btn-danger"> <%= link_to "Cancel", booking_path(booking), method: :delete, data: { confirm: "Are you sure?"} %></button>
            </div>
          </li>
        </div>
      <% end %>
    </ul>
  </div>

  <% if @user.lender %>
    <div class="card">
      <h2>Received Bookings</h2>
        <% if @received_bookings.empty? %>
          <p> You have not received any bookings. :( </p>
        <% end %>
        <ul>
          <% @received_bookings.each do |booking| %>
            <div class="card">
              <li>
                <div class="grid-item">
                  <strong>Name:</strong> <%= link_to booking.costume.name, costume_path(booking.costume)%> |
                  <strong> Start date:</strong> <%= booking.start_date %> |
                  <strong> End date:</strong> <%= booking.end_date %> |
                  <strong> Status:</strong> <%= booking.status %>
                </div>
                <div class="item"></div>
                <% if booking.status == "pending"%>
                  <div class="grid-item">
                    <button type="button" class="btn btn-success"> <%= link_to "Accept", booking_accept_path(booking), method: :patch,  data: { confirm: "Are you sure you want to accept this booking?" }%></button>
                    <button type="button" class="btn btn-danger"> <%= link_to "Reject", booking_reject_path(booking), method: :patch,  data: { confirm: "Are you sure you want to reject this booking?" } %></button>
                  </div>
                <% end %>
              </li>
           </div>
         <% end %>
       </ul>
    </div>

    <div class="card">
      <h2>My Costumes</h2>
      <ul>
        <% @user.costumes.each do |costume| %>
          <div class="card">
            <li>
              <div class="grid-item">
                <!-- implement small image + placeholder -->
                <strong>Name:</strong> <%= costume.name %> |
                <strong>Size:</strong> <%= costume.size %> |
                <strong>Price per day:</strong> <%= costume.price_per_day %> â‚¬ |
                <strong>Category:</strong> <%= costume.category %>
                <br>
                <strong>Description:</strong> <%= costume.description %>
             </div>
             <div class="item"></div>
             <div class="grid-item">
               <button type="button" class="btn btn-light" > <%= link_to "Show", costume_path(costume) %></button>
               <button type="button" class="btn btn-danger"><%= link_to "Delete", costume_path(costume), method: :delete, data: { confirm: "Are you sure?" } %></button>
             </div>
            </li>
          </div>
        <% end %>
     </ul>
    </div>
  <% end %>
</div>

